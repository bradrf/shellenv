#!/bin/bash

args=()

if $IAMME && [ -z "$SSH_CLIENT" ]; then
    # when alternate editor is empty, a daemon is automatically launched if not already running
    args+=(--alternate-editor '')
fi

if [[ "$*" == *-c* ]]; then
    # creating a frame, do not wait
    args+=(-n)
    # ihave osascript && osascript -e 'tell application "Emacs" to activate'
else
    # no new window, keep in terminal
    args+=(-nw)
fi

#echo "exec emacsclient ${args[*]} $*"
exec emacsclient "${args[@]}" "$@"
